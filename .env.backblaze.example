# ============================================
# PIGSTY SUPABASE - BACKBLAZE B2 EXAMPLE
# ============================================
# Example configuration using Backblaze B2 instead of MinIO
# Copy to .env and customize

# ============================================
# VPS CONNECTION
# ============================================
VPS_HOST=your.vps.ip.address
VPS_ROOT_PASSWORD=your_root_password

# ============================================
# DEPLOY USER (created automatically)
# ============================================
DEPLOY_USER=deploy
DEPLOY_USER_PASSWORD=change_this_strong_password

# ============================================
# POSTGRESQL
# ============================================
POSTGRES_PASSWORD=change_this_strong_password
PG_ADMIN_PASSWORD=change_this_strong_password

# ============================================
# SUPABASE JWT (40+ characters required)
# ============================================
JWT_SECRET=
ANON_KEY=
SERVICE_ROLE_KEY=

# ============================================
# SUPABASE DASHBOARD
# ============================================
DASHBOARD_USERNAME=supabase
DASHBOARD_PASSWORD=change_this_strong_password

# ============================================
# SUPABASE LOGFLARE (Analytics)
# ============================================
LOGFLARE_PUBLIC_ACCESS_TOKEN=
LOGFLARE_PRIVATE_ACCESS_TOKEN=

# ============================================
# MONITORING
# ============================================
GRAFANA_ADMIN_PASSWORD=change_this_strong_password

# ============================================
# STORAGE - BACKBLAZE B2
# ============================================
# MinIO NOT USED (Backblaze B2 instead)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=not_used

# Backblaze B2 S3 Configuration
# Get credentials from: https://secure.backblaze.com/app_keys.htm
S3_BUCKET=your-bucket-name
S3_ENDPOINT=https://s3.us-west-004.backblazeb2.com
S3_REGION=us-west-004
S3_ACCESS_KEY=0054f413fc50d980000000003
S3_SECRET_KEY=K005clOQr83kINWjCg9fWQ7GxaVsLY0
S3_FORCE_PATH_STYLE=false
S3_PROTOCOL=https

# Backblaze Endpoint Examples by Region:
# us-west-001: s3.us-west-001.backblazeb2.com
# us-west-002: s3.us-west-002.backblazeb2.com
# us-west-004: s3.us-west-004.backblazeb2.com
# us-east-005: s3.us-east-005.backblazeb2.com
# eu-central-003: s3.eu-central-003.backblazeb2.com

# ============================================
# OPTIONAL: DOMAIN & SSL
# ============================================
SUPABASE_DOMAIN=bitsflaredb.bits.do
SUPABASE_API_EXTERNAL_URL=https://bitsflaredb.bits.do
LETSENCRYPT_EMAIL=your@email.com
USE_LETSENCRYPT=true

# ============================================
# OPTIONAL: SMTP (for email features)
# ============================================
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_SENDER_NAME=Supabase

# ============================================
# PGBACKREST - PostgreSQL Backups to Backblaze B2
# ============================================
# Enables automated PostgreSQL backups with Point-in-Time Recovery
# Stores backups in Backblaze B2 (S3-compatible)

# Enable pgBackRest
PGBACKREST_ENABLED=true

# Use S3 method for Backblaze B2
PGBACKREST_METHOD=s3

# TUS_ALLOW_S3_TAGS: Disable S3 tagging for Backblaze B2
# CRITICAL: Backblaze B2 does NOT support x-amz-tagging header
# This must be set to 'false' to prevent upload errors
TUS_ALLOW_S3_TAGS=false

# Backblaze B2 Repository for PostgreSQL Backups
# TIP: Use the same bucket as Supabase storage, or create a dedicated backup bucket
PGBACKREST_S3_BUCKET=your-bucket-name
PGBACKREST_S3_ENDPOINT=https://s3.us-west-004.backblazeb2.com
PGBACKREST_S3_REGION=us-west-004
PGBACKREST_S3_ACCESS_KEY=0054f413fc50d980000000003
PGBACKREST_S3_SECRET_KEY=K005clOQr83kINWjCg9fWQ7GxaVsLY0

# Encryption for backups (HIGHLY RECOMMENDED)
# Generate with: openssl rand -base64 32
PGBACKREST_CIPHER_PASS=

# Backup Retention (14 days = 2 weeks of backups)
PGBACKREST_RETENTION_FULL=14

# Local Backup Repository (for faster restores)
# Keeps 2 recent backups on local disk
PGBACKREST_LOCAL_ENABLED=true
PGBACKREST_LOCAL_RETENTION_FULL=2
