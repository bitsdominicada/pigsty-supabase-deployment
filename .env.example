# ============================================
# PIGSTY SUPABASE - CONFIGURATION
# ============================================
# Copy this file to .env and configure
# Command: cp .env.example .env

# ============================================
# VPS CONNECTION
# ============================================
VPS_HOST=your.vps.ip.address
VPS_ROOT_PASSWORD=your_root_password

# ============================================
# DEPLOY USER (created automatically)
# ============================================
DEPLOY_USER=deploy
DEPLOY_USER_PASSWORD=change_this_strong_password

# ============================================
# POSTGRESQL
# ============================================
POSTGRES_PASSWORD=change_this_strong_password
PG_ADMIN_PASSWORD=change_this_strong_password

# ============================================
# SUPABASE JWT (40+ characters required)
# ============================================
# Generate with: openssl rand -base64 32
JWT_SECRET=

# Generated automatically if empty
# Or generate with: ./scripts/deploy jwt
ANON_KEY=
SERVICE_ROLE_KEY=

# ============================================
# SUPABASE DASHBOARD
# ============================================
# Credentials for Supabase Studio dashboard
DASHBOARD_USERNAME=supabase
DASHBOARD_PASSWORD=change_this_strong_password

# ============================================
# SUPABASE LOGFLARE (Analytics)
# ============================================
# 32-64 character random strings for analytics
# Generate with: openssl rand -hex 32
LOGFLARE_PUBLIC_ACCESS_TOKEN=
LOGFLARE_PRIVATE_ACCESS_TOKEN=

# ============================================
# MONITORING
# ============================================
GRAFANA_ADMIN_PASSWORD=change_this_strong_password

# ============================================
# STORAGE (S3-Compatible)
# ============================================
# Works with any S3-compatible provider: MinIO, Backblaze B2, AWS S3, etc.

# MinIO Admin (only if using MinIO on VPS)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=change_this_strong_password

# S3 Configuration (for Supabase Storage)
# Default: MinIO local (https://sss.pigsty:9000)
# For Backblaze: See .env.backblaze.example
S3_BUCKET=data
S3_ENDPOINT=https://sss.pigsty:9000
S3_REGION=stub
S3_ACCESS_KEY=s3user_data
S3_SECRET_KEY=change_this_strong_password
S3_FORCE_PATH_STYLE=true

# TUS_ALLOW_S3_TAGS: Controls S3 object tagging in resumable uploads
# Set to 'false' for S3-compatible providers that don't support x-amz-tagging
# Required for: Backblaze B2, Cloudflare R2, DigitalOcean Spaces
# Not needed for: MinIO, AWS S3
# Uncomment and set to false if using Backblaze B2:
# TUS_ALLOW_S3_TAGS=false

# ============================================
# OPTIONAL: DOMAIN & SSL
# ============================================
SUPABASE_DOMAIN=
SUPABASE_API_EXTERNAL_URL=
LETSENCRYPT_EMAIL=
USE_LETSENCRYPT=false

# ============================================
# OPTIONAL: SMTP (for email features)
# ============================================
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_SENDER_NAME=Supabase

# ============================================
# PGBACKREST - PostgreSQL Backup & Recovery
# ============================================
# Enables automated PostgreSQL backups with Point-in-Time Recovery
# Uses S3-compatible storage (Backblaze B2, MinIO, AWS S3)

# Enable pgBackRest
PGBACKREST_ENABLED=true

# Backup method: local, minio, s3
PGBACKREST_METHOD=s3

# S3 Repository Configuration (for pgBackRest)
# These can be the same as S3_* above, or use a different bucket/credentials
PGBACKREST_S3_BUCKET=
PGBACKREST_S3_ENDPOINT=
PGBACKREST_S3_REGION=
PGBACKREST_S3_ACCESS_KEY=
PGBACKREST_S3_SECRET_KEY=

# Encryption (HIGHLY RECOMMENDED for backups)
# Generate with: openssl rand -base64 32
PGBACKREST_CIPHER_PASS=

# Backup Retention (days for full backups)
PGBACKREST_RETENTION_FULL=14

# Local Backup Repository (optional - for faster restores)
PGBACKREST_LOCAL_ENABLED=true
PGBACKREST_LOCAL_RETENTION_FULL=2
